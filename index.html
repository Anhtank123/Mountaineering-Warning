<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>C·∫£nh b√°o khi leo n√∫i ‚Äì Poster t∆∞∆°ng t√°c</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Cabin:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0e1b17;--bg-2:#13231d;--bg-3:#10221b;--text:#eef7f2;--muted:#bcd2c6;--line:rgba(255,255,255,.18);
      --glass:rgba(255,255,255,.06);--accent:#ffd36a;--accent-2:#ffebad;--safe:#7cffc0;--amber:#ffb84d;--danger:#ff6a7a;
      --earth:#5a412f;--pine:#1d3b2a;--sky:#58b6ff;--snow:#ffffff;
    }
    [data-theme="day"]{
      --bg:#eaf4ff;--bg-2:#f7fbff;--bg-3:#dff1ff;--text:#1b2b26;--muted:#4d5b56;--line:rgba(0,0,0,.12);
      --glass:rgba(255,255,255,.7);--accent:#f7a400;--accent-2:#ffe8a8;--safe:#15b886;--amber:#d97b00;--danger:#d23d56;
      --earth:#7b5b42;--pine:#1f5a44;--sky:#63a9ff;--snow:#ffffff;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:'Inter',ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);
      background:radial-gradient(100% 80% at 20% 0%,var(--bg-3) 0%,rgba(0,0,0,0) 60%),radial-gradient(80% 80% at 85% 10%,var(--bg-2) 0%,rgba(0,0,0,0) 65%),var(--bg);
      letter-spacing:.1px;line-height:1.4;overflow-x:hidden}
    .wrap{max-width:980px;margin:0 auto;padding:18mm 12mm;position:relative}
    .scene{position:absolute;inset:0;pointer-events:none;overflow:hidden}
    .layer{position:absolute;width:160%;left:-30%;bottom:-80px;opacity:.7;filter:drop-shadow(0 6px 18px rgba(0,0,0,.35))}
    .mountain-1{height:220px;background:linear-gradient(180deg,#274235,#14261f);clip-path:polygon(0% 100%, 12% 65%, 18% 72%, 28% 40%, 36% 55%, 48% 28%, 62% 58%, 76% 38%, 86% 62%, 100% 100%)}
    .mountain-2{height:280px;background:linear-gradient(180deg,#325244,#1c3027);clip-path:polygon(0% 100%, 8% 72%, 16% 60%, 24% 68%, 30% 46%, 44% 34%, 56% 58%, 70% 40%, 84% 52%, 100% 100%)}
    .mountain-3{height:340px;background:linear-gradient(180deg,#3d5f4e,#1e342b);clip-path:polygon(0% 100%, 6% 76%, 20% 56%, 30% 64%, 42% 44%, 52% 52%, 68% 36%, 82% 48%, 94% 40%, 100% 100%)}
    .sun,.moon{position:absolute;top:60px;right:100px;width:90px;height:90px;border-radius:50%;z-index:0;box-shadow:0 0 40px 10px var(--accent-2)}
    .sun{background:radial-gradient(circle at 30% 30%,#fff7d6 0%,var(--accent) 60%,rgba(0,0,0,0) 63%)}
    .moon{background:radial-gradient(circle at 40% 40%,#ffffff 0%,#d7e0ff 45%,rgba(0,0,0,0) 60%)}
    .cloud{position:absolute;top:120px;left:-20%;width:240px;height:80px;border-radius:40px;background:rgba(255,255,255,.4);filter:blur(.5px);animation:drift 40s linear infinite}
    .cloud::before,.cloud::after{content:"";position:absolute;background:inherit;border-radius:inherit}
    .cloud::before{width:160px;height:64px;left:18px;top:-32px}.cloud::after{width:120px;height:56px;left:120px;top:-18px}
    .cloud.c2{top:170px;animation-duration:55s;opacity:.35}.cloud.c3{top:210px;animation-duration:70s;opacity:.3}
    @keyframes drift{from{transform:translateX(0)}to{transform:translateX(160%)}}
    .panel{position:relative;z-index:2;background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04));border:1px solid var(--line);
      border-radius:22px;box-shadow:0 32px 96px rgba(0,0,0,.45);backdrop-filter:blur(12px);overflow:hidden}
    header{padding:16px 20px 12px;display:grid;grid-template-columns:1fr auto;gap:14px;align-items:center}
    .brand{display:flex;gap:12px;align-items:center}
    .badge{background:linear-gradient(135deg,#fff6b0 0%,#ffd36a 25%,#fff6b0 50%,#ffd36a 75%,#fff6b0 100%);background-size:300% 300%;
      animation:shine 6s linear infinite;color:#2a291f;padding:16px 28px;font-weight:900;border-radius:999px;
      box-shadow:0 24px 50px rgba(255,211,106,.5),inset 0 2px 6px rgba(255,255,255,.6);font-size:30px;letter-spacing:2px;text-transform:uppercase}
    @keyframes shine{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .seal{border:1px solid var(--line);border-radius:12px;padding:8px 12px;color:var(--muted);font-size:12px;
      background:linear-gradient(135deg,rgba(255,255,255,.08),rgba(255,255,255,.03));font-weight:700}
    h1{font:900 38px 'Cabin',Inter,sans-serif;line-height:1.08;text-wrap:balance;text-shadow:0 2px 4px rgba(0,0,0,.3)}
    .sub{color:var(--muted);margin-top:4px;font-size:17px;font-weight:600}
    .toolbar{padding:8px 20px 12px;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .btn{appearance:none;border:1px solid var(--line);background:linear-gradient(180deg,var(--glass),rgba(255,255,255,.05));color:var(--text);
      border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer;letter-spacing:.3px;box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
      transition:transform .15s ease,box-shadow .2s ease,background .2s}
    .btn:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(0,0,0,.25)} .btn:active{transform:translateY(0)}
    .btn-ghost{background:transparent}.btn-primary{background:linear-gradient(180deg,rgba(255,211,106,.8),rgba(255,211,106,.55));color:#2a291f}
    .grid{padding:12px 20px 20px;display:grid;gap:16px;grid-template-columns:1fr 1fr}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.11),rgba(255,255,255,.04));border:1px solid var(--line);
      border-radius:16px;padding:16px;box-shadow:inset 0 0 0 1px rgba(255,255,255,.03);transition:transform .2s ease,box-shadow .2s ease}
    .card:hover{transform:translateY(-4px);box-shadow:0 12px 32px rgba(0,0,0,.3)} .card h3{margin:0 0 8px;font-size:19px;font-weight:800;letter-spacing:.4px}
    .quick{display:grid;gap:10px}
    .pill{display:grid;grid-template-columns:46px 1fr auto;gap:12px;align-items:center;border:1px solid var(--line);border-radius:14px;padding:10px 12px;background:linear-gradient(180deg,var(--glass),rgba(255,255,255,.05))}
    .ico{width:46px;height:46px;border-radius:12px;display:grid;place-items:center;background:rgba(255,255,255,.1)}
    .stat{font-weight:900;font-size:18px;color:var(--accent)}
    .muted{color:var(--muted);font-size:13.5px}
    .risk-grid{display:grid;grid-template-columns:1fr;gap:8px;margin-top:8px}
    .risk{position:relative;padding:10px;border-radius:12px;border:1px solid var(--line)}
    .risk.level1{background:linear-gradient(180deg,rgba(124,255,192,.1),rgba(124,255,192,.04))}
    .risk.level2{background:linear-gradient(180deg,rgba(255,184,77,.12),rgba(255,184,77,.04))}
    .risk.level3{background:linear-gradient(180deg,rgba(255,106,122,.14),rgba(255,106,122,.04))}
    .risk header{display:grid;grid-template-columns:auto 1fr auto;gap:8px;align-items:center;padding:0}
    .badge{padding:2px 8px;border-radius:999px;font-size:11px;font-weight:900;border:1px solid currentColor}
    .green{color:var(--safe)} .amber{color:var(--amber)} .red{color:var(--danger)}
    .checklist{display:grid;gap:8px;margin-top:8px}
    .check{display:grid;grid-template-columns:auto 1fr auto;gap:8px;align-items:center;padding:8px 10px;border:1px dashed var(--line);border-radius:10px}
    .check input{accent-color:var(--accent)} .chip{font-size:11px;border:1px solid var(--line);padding:4px 8px;border-radius:999px;color:var(--muted)}
    .altitude{margin:10px 0 8px;padding:12px;background:rgba(255,255,255,.06);border-radius:12px;border:1px solid var(--line);position:relative}
    .labels{display:flex;justify-content:space-between;font-size:12.5px;color:var(--muted);margin-bottom:6px}
    .slider{position:relative;height:22px;border-radius:999px;overflow:hidden;background:rgba(0,0,0,.25);box-shadow:inset 0 0 0 1px rgba(0,0,0,.25),0 8px 20px rgba(0,0,0,.25);cursor:pointer;user-select:none}
    .zone{position:absolute;top:0;height:100%}.z-green{left:0;width:28%;background:var(--safe)}.z-yellow{left:28%;width:38%;background:var(--amber)}.z-red{left:66%;right:0;background:var(--danger)}
    .arrow{position:absolute;top:0;left:0;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:9px solid var(--snow);transform:translateX(-50%);transition:left .09s cubic-bezier(.2,.8,.4,1);z-index:5;filter:drop-shadow(0 1px 3px rgba(0,0,0,.5))}
    .arrow::after{content:attr(data-alt);position:absolute;bottom:-22px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.6);color:#fff;padding:3px 7px;border-radius:5px;font-size:11px;white-space:nowrap;opacity:0;transition:opacity .2s}
    .arrow:hover::after{opacity:1}
    .zone-list{margin:10px 0 0;padding-left:20px;font-size:14px}
    .zone-list li{margin:3px 0;transition:transform .2s ease,text-shadow .2s ease,opacity .2s ease}
    .zone-list li.active{transform:scale(1.02);text-shadow:0 0 12px currentColor,0 0 24px currentColor;font-weight:800;opacity:1}
    .zone-list li:not(.active){opacity:.65}
    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
    .kpi{background:rgba(0,0,0,.2);border:1px solid var(--line);border-radius:12px;padding:10px}
    .kpi .v{font:900 18px 'Inter'}
    .qrbox{display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center;border:1px solid var(--line);border-radius:14px;padding:12px;background:linear-gradient(180deg,var(--glass),rgba(255,255,255,.05));margin-top:12px;cursor:pointer}
    .qr{width:110px;height:110px;background:#fff;border-radius:10px;display:grid;place-items:center;padding:4px}
    .qr img{width:100%;height:100%;object-fit:contain}
    .elevation{margin-top:10px;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02))}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.75);backdrop-filter:blur(8px);display:none;align-items:center;justify-content:center;z-index:999;opacity:0;transition:opacity .3s ease}
    .modal.active{display:flex;opacity:1}.modal-content{background:var(--bg);border:1px solid var(--line);border-radius:20px;padding:24px;max-width:90%;box-shadow:0 32px 80px rgba(0,0,0,.5);transform:scale(.9);transition:transform .3s ease}
    .modal.active .modal-content{transform:scale(1)} .close{float:right;cursor:pointer;font-size:24px;color:var(--muted)}
    footer{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:end;padding:0 20px 18px;color:var(--muted);font-size:13px}
    @page{size:A3 portrait;margin:12mm}
    @media print{body{background:#fff!important}.scene,.toolbar,.qrbox{display:none!important}.panel{box-shadow:none}}
    @media (max-width:980px){.wrap{padding:14mm 10mm}.badge{font-size:22px;padding:12px 18px}h1{font-size:30px}}
    @media (max-width:860px){.grid{grid-template-columns:1fr}}
    .zone.active{filter:brightness(1.25) saturate(1.1);box-shadow:inset 0 0 14px rgba(0,0,0,.25),0 0 14px rgba(255,255,255,.18)}
    #stateBox{transition:background .3s ease,box-shadow .3s ease}
    #stateBox.green{background:rgba(124,255,192,.10);box-shadow:0 0 14px rgba(124,255,192,.30) inset}
    #stateBox.amber{background:rgba(255,184,77,.10);box-shadow:0 0 14px rgba(255,184,77,.30) inset}
    #stateBox.red{background:rgba(255,106,122,.10);box-shadow:0 0 14px rgba(255,106,122,.30) inset}
    @keyframes pulseGreen{0%{box-shadow:0 0 0 0 rgba(124,255,192,.55)}70%{box-shadow:0 0 0 16px rgba(124,255,192,0)}100%{box-shadow:0 0 0 0 rgba(124,255,192,0)}}
    @keyframes pulseAmber{0%{box-shadow:0 0 0 0 rgba(255,184,77,.55)}70%{box-shadow:0 0 0 16px rgba(255,184,77,0)}100%{box-shadow:0 0 0 0 rgba(255,184,77,0)}}
    @keyframes pulseRed{0%{box-shadow:0 0 0 0 rgba(255,106,122,.55)}70%{box-shadow:0 0 0 16px rgba(255,106,122,0)}100%{box-shadow:0 0 0 0 rgba(255,106,122,0)}}
    .pulse-green{animation:pulseGreen 900ms ease-out}.pulse-amber{animation:pulseAmber 900ms ease-out}.pulse-red{animation:pulseRed 900ms ease-out}
  </style>
</head>
<body data-theme="night">
  <div class="wrap">
    <div class="scene" aria-hidden="true">
      <div class="sun" id="sun"></div>
      <div class="moon" id="moon" style="display:block"></div>
      <div class="cloud c1"></div><div class="cloud c2"></div><div class="cloud c3"></div>
      <div class="layer mountain-3" style="animation: par 25s linear infinite"></div>
      <div class="layer mountain-2" style="animation: par 35s linear infinite"></div>
      <div class="layer mountain-1" style="animation: par 50s linear infinite"></div>
    </div>
    <style>@keyframes par{from{transform:translateX(0)}to{transform:translateX(-10%)}}</style>

    <div class="panel" role="region" aria-label="Poster t∆∞∆°ng t√°c leo n√∫i">
      <header>
        <div class="brand"><div class="badge">MOUNTAIN SAFETY ¬∑ ALTITUDE</div></div>
        <div class="seal">12E ¬∑ STEM</div>
      </header>

      <div style="padding:0 20px 0">
        <h1>C·∫¢NH B√ÅO KHI LEO N√öI<br><span class="sub">Theo d√µi ƒë·ªô cao ¬∑ Oxy ¬∑ Tri·ªáu ch·ª©ng say ƒë·ªô cao (AMS/HAPE/HACE)</span></h1>
      </div>

      <div class="toolbar" aria-label="Thanh c√¥ng c·ª•">
        <button class="btn btn-primary" id="toggleTheme" aria-pressed="false">Ch·∫ø ƒë·ªô: ƒê√™m üåô</button>
        <button class="btn" id="demoFlight">T·ª± ch·∫°y m√¥ ph·ªèng ƒë·ªô cao</button>
        <button class="btn btn-ghost" id="reset">ƒê·∫∑t l·∫°i</button>
        <span style="color:var(--muted);font-size:13px">M·∫πo: D√πng ph√≠m ‚óÄ ‚ñ∂ ƒë·ªÉ d·ªãch chuy·ªÉn ƒë·ªô cao</span>
      </div>

      <section class="grid">
        <!-- LEFT -->
        <article class="card" aria-labelledby="quickTitle">
          <h3 id="quickTitle">M·∫∏O SINH T·ªíN NHANH</h3>
          <div class="quick">
            <div class="pill">
              <div class="ico" aria-hidden="true">üèîÔ∏è</div>
              <div>
                <strong>Leo ch·∫≠m ‚Äì ngh·ªâ ƒë·ªÅu</strong>
                <div class="muted">Kh√¥ng tƒÉng ƒë·ªô cao > <b>500 m/ng√†y</b>. Quy t·∫Øc: "<i>Climb high, sleep low</i>".</div>
              </div>
              <div class="stat" id="statGain">+0 m</div>
            </div>
            <div class="pill">
              <div class="ico" aria-hidden="true">üíß</div>
              <div><strong>Hydrate ƒë√∫ng c√°ch</strong>
                <div class="muted">U·ªëng <b>250‚Äì500 ml/gi·ªù</b>, h·∫°n ch·∫ø r∆∞·ª£u & caffeine.</div>
              </div>
              <div class="chip">H2O</div>
            </div>
            <div class="pill">
              <div class="ico" aria-hidden="true">ü´Å</div>
              <div><strong>Th·ªü s√¢u & b√¨nh tƒ©nh</strong>
                <div class="muted">H√≠t 4s ‚Äì gi·ªØ 2s ‚Äì th·ªü 6s gi√∫p ·ªïn ƒë·ªãnh SpO‚ÇÇ.</div>
              </div>
              <div class="chip">Breathwork</div>
            </div>
            <div class="pill">
              <div class="ico" aria-hidden="true">üß≠</div>
              <div><strong>Qu·∫£n l√Ω th·ªùi ti·∫øt</strong>
                <div class="muted">M∆∞a ‚Äì tuy·∫øt ‚Äì gi√≥ m·∫°nh: t·∫°m d·ª´ng, tr√∫ an to√†n.</div>
              </div>
              <div class="chip">WX</div>
            </div>
          </div>

          <h3 style="margin-top:12px">M·ª®C R·ª¶I RO TRI·ªÜU CH·ª®NG</h3>
          <div class="risk-grid">
            <div class="risk level1">
              <header><div class="badge green">M·ª©c 1</div><strong>·ªîn ƒë·ªãnh ‚Äì T·ª± x·ª≠ l√Ω</strong><small style="color:var(--muted)">Ch∆∞a c·∫ßn b√°o</small></header>
              <ul class="muted" style="margin:6px 0 0 16px">
                <li>ƒêau ƒë·∫ßu nh·∫π, m·ªát m·ªèi ‚Üí ngh·ªâ, u·ªëng n∆∞·ªõc, ƒÉn nh·∫π.</li>
                <li>M·∫πo: Paracetamol 500 mg n·∫øu ƒëau ƒë·∫ßu k√©o d√†i.</li>
              </ul>
            </div>
            <div class="risk level2">
              <header><div class="badge amber">M·ª©c 2</div><strong>C·∫£nh b√°o ‚Äì D·ª´ng leo</strong><small style="color:var(--muted)">Theo d√µi s√°t</small></header>
              <ul class="muted" style="margin:6px 0 0 16px">
                <li>Bu·ªìn n√¥n, ch√≥ng m·∫∑t, nh·ªãp tim nhanh ‚Üí <b>d·ª´ng leo</b>, th·ªü s√¢u, tƒÉng ·∫•m.</li>
                <li>Xem x√©t <i>acetazolamide</i> (n·∫øu c√≥ ch·ªâ ƒë·ªãnh).</li>
              </ul>
            </div>
            <div class="risk level3">
              <header><div class="badge red">M·ª©c 3</div><strong>Nguy hi·ªÉm ‚Äì Xu·ªëng th·∫•p ngay</strong><small style="color:var(--muted)">B√°o c·ª©u h·ªô</small></header>
              <ul class="muted" style="margin:6px 0 0 16px">
                <li>Kh√≥ th·ªü khi ngh·ªâ, ho b·ªçt h·ªìng (HAPE), l√∫ l·∫´n/ƒëi lo·∫°ng cho·∫°ng (HACE).</li>
                <li><b>Xu·ªëng th·∫•p ‚â• 500 m</b> c√†ng s·ªõm c√†ng t·ªët, oxy b·ªï sung n·∫øu c√≥.</li>
              </ul>
            </div>
          </div>

          <h3 style="margin-top:12px">CHECKLIST TR∆Ø·ªöC KHI LEO</h3>
          <div class="checklist" role="list">
            <label class="check"><input type="checkbox"/> <span>B·∫£o h·ªô: gi√†y trekking, g·∫≠y, √°o m∆∞a, m≈© len</span> <span class="chip">Gear</span></label>
            <label class="check"><input type="checkbox"/> <span>N∆∞·ªõc, mu·ªëi ƒëi·ªán gi·∫£i, snack nƒÉng l∆∞·ª£ng</span> <span class="chip">Fuel</span></label>
            <label class="check"><input type="checkbox"/> <span>B·ªô s∆° c·ª©u: bƒÉng, thu·ªëc ƒëau ƒë·∫ßu, b·ªçc nhi·ªát</span> <span class="chip">Med</span></label>
            <label class="check"><input type="checkbox"/> <span>Th√¥ng b√°o l·ªô tr√¨nh cho ng∆∞·ªùi th√¢n/ƒë·ªôi nh√≥m</span> <span class="chip">Plan</span></label>
          </div>
        </article>

        <!-- RIGHT -->
        <article class="card" aria-labelledby="altTitle">
          <h3 id="altTitle">ƒê·ªò CAO ¬∑ OXY ¬∑ C·∫¢NH B√ÅO</h3>
          <div class="altitude" id="altitudeBox">
            <div class="labels"><span>0 m</span><span id="altMid">4.424 m</span><span>8.848 m</span></div>
            <div class="slider" id="slider" role="slider" aria-valuemin="0" aria-valuemax="8848" aria-valuenow="0" tabindex="0">
              <div class="zone z-green" aria-hidden="true"></div>
              <div class="zone z-yellow" aria-hidden="true"></div>
              <div class="zone z-red" aria-hidden="true"></div>
              <div class="arrow" id="arrow" data-alt="0 m"></div>
            </div>

            <div id="status" class="muted" style="font-size:14px;margin-top:6px">
              √Åp su·∫•t: <strong id="pVal">101.3</strong> kPa ¬∑ Oxy t∆∞∆°ng ƒë·ªëi: <strong id="oVal">100</strong>% ¬∑ Nguy c∆°: <strong id="riskVal">Th·∫•p</strong>
            </div>

            <!-- Stats: Alt | EMPTY | State -->
            <div class="stats" aria-label="Th√¥ng s·ªë nhanh">
              <div class="kpi"><div class="muted">ƒê·ªô cao hi·ªán t·∫°i</div><div class="v" id="altVal">0 m</div></div>
              <div class="kpi" style="background:transparent;border:none;"></div>
              <div class="kpi" id="stateBox"><div class="muted">Tr·∫°ng th√°i</div><div class="v" id="stateVal">·ªîn ƒë·ªãnh</div></div>
            </div>

            <ul class="zone-list">
              <li id="zGreen" style="color:var(--safe)"><strong>V√πng xanh</strong>: th√≠ch nghi t·ªët ¬∑ ngh·ªâ ng·∫Øn ¬∑ u·ªëng ƒë·ªß n∆∞·ªõc.</li>
              <li id="zYellow" style="color:var(--amber)"><strong>V√πng v√†ng</strong>: ti·∫øn ch·∫≠m ¬∑ ng·ªß th·∫•p h∆°n ƒëi·ªÉm leo.</li>
              <li id="zRed" style="color:var(--danger)"><strong>V√πng ƒë·ªè</strong>: nguy c∆° s·ªëc ƒë·ªô cao ¬∑ xu·ªëng th·∫•p ngay n·∫øu tri·ªáu ch·ª©ng n·∫∑ng.</li>
            </ul>

            <div class="qrbox" id="openModal" role="button" aria-label="M·ªü h∆∞·ªõng d·∫´n say ƒë·ªô cao">
              <div>
                <strong>Qu√©t QR ƒë·ªÉ xem h∆∞·ªõng d·∫´n x·ª≠ l√Ω say ƒë·ªô cao</strong>
                <div class="muted">Video VI/EN ¬∑ S∆° c·ª©u AMS/HAPE/HACE</div>
              </div>
              <div class="qr"><img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://www.youtube.com/watch?v=QwZT7T-TXT0" alt="QR h∆∞·ªõng d·∫´n say ƒë·ªô cao"/></div>
            </div>

            <div class="elevation" aria-hidden="true">
              <svg viewBox="0 0 800 140" width="100%" height="120" preserveAspectRatio="none">
                <defs><linearGradient id="grad" x1="0" x2="0" y1="0" y2="1"><stop offset="0%" stop-color="var(--accent)" stop-opacity=".8"/><stop offset="100%" stop-color="var(--accent)" stop-opacity="0"/></linearGradient></defs>
                <path d="M0 110 L80 90 L140 96 L190 72 L250 86 L310 58 L380 92 L450 70 L520 84 L590 52 L660 60 L740 42 L800 50 L800 140 L0 140 Z" fill="url(#grad)"/>
                <polyline points="0,110 80,90 140,96 190,72 250,86 310,58 380,92 450,70 520,84 590,52 660,60 740,42 800,50" fill="none" stroke="var(--accent)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </article>
      </section>

      <footer>
        <div>¬© 2025 ¬∑ Mountain Safety Poster ¬∑ 12E ‚Äì STEM ‚Äì KTHS.</div>
        <div>Thi·∫øt k·∫ø b·ªüi nh√≥m STEM V·∫≠t L√Ω ¬∑ Phi√™n b·∫£n t∆∞∆°ng t√°c</div>
      </footer>
    </div>
  </div>

  <!-- Modal QR -->
  <div class="modal" id="qrModal" aria-modal="true" role="dialog" aria-label="H∆∞·ªõng d·∫´n say ƒë·ªô cao">
    <div class="modal-content">
      <span class="close" id="closeModal">√ó</span>
      <h3>H∆∞·ªõng d·∫´n chi ti·∫øt x·ª≠ l√Ω say ƒë·ªô cao</h3>
      <ol style="margin:8px 0 0 18px">
        <li><strong>D·ª´ng leo</strong> v√† <strong>ngh·ªâ</strong> ngay khi c√≥ tri·ªáu ch·ª©ng.</li>
        <li>U·ªëng n∆∞·ªõc ·∫•m, gi·ªØ c∆° th·ªÉ <strong>·∫•m</strong>, th·ªü s√¢u ‚Äì ch·∫≠m.</li>
        <li>N·∫øu n·∫∑ng: <strong>xu·ªëng th·∫•p ‚â• 500 m</strong>, s·ª≠ d·ª•ng oxy/b√≥ng t√∫i n·∫øu c√≥.</li>
      </ol>
      <p style="margin-top:14px" class="muted">Video h∆∞·ªõng d·∫´n (YouTube): <a href="https://www.youtube.com/watch?v=QwZT7T-TXT0" target="_blank" style="color:var(--accent)">Xem ngay ‚Üí</a></p>
    </div>
  </div>

<script>
  // ===== Utilities
  const $ = (s,root=document)=>root.querySelector(s);
  // Elements
  const slider = $('#slider'), arrow = $('#arrow');
  const altVal = $('#altVal'), stateVal = $('#stateVal');
  const pVal = $('#pVal'), oVal = $('#oVal'), riskVal = $('#riskVal');
  const statGain = $('#statGain'); // <<‚Äî NEW: hi·ªÉn th·ªã +Xm pill
  const toggleTheme = $('#toggleTheme'), demoFlightBtn = $('#demoFlight'), resetBtn = $('#reset');
  const openModalBtn = $('#openModal'), modal = $('#qrModal'), closeModalBtn = $('#closeModal');
  const sun = $('#sun'), moon = $('#moon');
  const zGreenBar = document.querySelector('.z-green'), zYellowBar = document.querySelector('.z-yellow'), zRedBar = document.querySelector('.z-red');
  const zGreenText = $('#zGreen'), zYellowText = $('#zYellow'), zRedText = $('#zRed');
  const stateBox = $('#stateBox');

  // ===== Model & zones
  const MAX_ALT = 8848;
  const GREEN_END = 0.28 * MAX_ALT;     // ~2480 m
  const YELLOW_END = 0.66 * MAX_ALT;    // ~5840 m
  let targetAlt = 0, smoothAlt = 0, isDragging = false, demoRAF = null;
  let startAltToday = 0;                // <<‚Äî NEW: m·ªëc ƒë·∫ßu ng√†y ƒë·ªÉ t√≠nh +/-

  // FPS cap
  let lastFrame = performance.now();
  const FRAME_INTERVAL = 1000/120;

  // ===== Helpers
  function calcPressure(h){ const p=101.325*Math.pow(1-2.25577e-5*h,5.2559); return Math.max(30,Math.min(101.3,p)).toFixed(1) }
  function calcOxygen(h){ return Math.max(35,Math.min(100,100-Math.round(h/95))) }
  function zoneOf(h){ if(h<=GREEN_END) return 'green'; if(h<=YELLOW_END) return 'yellow'; return 'red' }
  function pulse(color){
    stateBox.classList.remove('pulse-green','pulse-amber','pulse-red'); void stateBox.offsetWidth;
    stateBox.classList.add(color==='green'?'pulse-green':color==='yellow'?'pulse-amber':'pulse-red');
  }
  function highlightZone(h){
    [zGreenBar,zYellowBar,zRedBar].forEach(e=>e.classList.remove('active'));
    [zGreenText,zYellowText,zRedText].forEach(e=>e.classList.remove('active'));
    stateBox.classList.remove('green','amber','red');
    const z = zoneOf(h);
    if(z==='green'){ zGreenBar.classList.add('active'); zGreenText.classList.add('active'); stateBox.classList.add('green'); stateVal.style.color='var(--safe)'; }
    else if(z==='yellow'){ zYellowBar.classList.add('active'); zYellowText.classList.add('active'); stateBox.classList.add('amber'); stateVal.style.color='var(--amber)'; }
    else { zRedBar.classList.add('active'); zRedText.classList.add('active'); stateBox.classList.add('red'); stateVal.style.color='var(--danger)'; }
  }

  // ===== UI update
  let lastZone = 'green';
  function updateUIByAlt(h){
    const percent = h / MAX_ALT;
    arrow.style.left = (percent*100)+'%';
    arrow.setAttribute('data-alt', Math.round(h)+' m');
    slider.setAttribute('aria-valuenow', Math.round(h));
    altVal.textContent = Math.round(h)+' m';

    // NEW: c·∫≠p nh·∫≠t +/‚àíXm ·ªü pill ‚ÄúLeo ch·∫≠m ‚Äì ngh·ªâ ƒë·ªÅu‚Äù
    const gain = Math.round(h - startAltToday);
    statGain.textContent = (gain>=0?'+':'') + gain + ' m';

    pVal.textContent = calcPressure(h);
    oVal.textContent = calcOxygen(h);

    const z = zoneOf(h);
    if(z==='green'){ riskVal.textContent='Th·∫•p'; riskVal.style.color='var(--safe)'; stateVal.textContent='·ªîn ƒë·ªãnh'; }
    else if(z==='yellow'){ riskVal.textContent='V·ª´a'; riskVal.style.color='var(--amber)'; stateVal.textContent='C·∫£nh b√°o'; }
    else { riskVal.textContent='Cao'; riskVal.style.color='var(--danger)'; stateVal.textContent='Nguy hi·ªÉm'; }

    if(z!==lastZone){ pulse(z); lastZone=z; }
    highlightZone(h);
  }

  // ===== Render loop
  function renderLoop(now){
    const dt = now - lastFrame;
    if(dt >= FRAME_INTERVAL){
      lastFrame = now;
      smoothAlt += (targetAlt - smoothAlt) * 0.25;
      updateUIByAlt(smoothAlt);
    }
    requestAnimationFrame(renderLoop);
  }
  requestAnimationFrame(renderLoop);

  // ===== Slider interactions
  function posToAlt(clientX){
    const rect = slider.getBoundingClientRect();
    let p = (clientX - rect.left)/rect.width; p = Math.max(0,Math.min(1,p));
    return p*MAX_ALT;
  }
  function onPointerDown(e){ isDragging=true; const x=e.touches?e.touches[0].clientX:e.clientX; targetAlt=posToAlt(x); }
  function onPointerMove(e){ if(!isDragging) return; const x=e.touches?e.touches[0].clientX:e.clientX; targetAlt=posToAlt(x); e.preventDefault(); }
  function onPointerUp(){ isDragging=false; }
  slider.addEventListener('mousedown', onPointerDown);
  document.addEventListener('mousemove', onPointerMove);
  document.addEventListener('mouseup', onPointerUp);
  slider.addEventListener('touchstart', onPointerDown, {passive:false});
  document.addEventListener('touchmove', onPointerMove, {passive:false});
  document.addEventListener('touchend', onPointerUp);
  slider.addEventListener('click', e=>{ if(!isDragging) targetAlt = posToAlt(e.clientX); });
  slider.addEventListener('keydown', e=>{
    const step = (e.shiftKey?200:50);
    if(e.key==='ArrowRight') targetAlt = Math.min(MAX_ALT, targetAlt+step);
    if(e.key==='ArrowLeft')  targetAlt = Math.max(0, targetAlt-step);
  });

  // ===== Demo flight
  function startDemo(){
    stopDemo();
    const T = 26000, t0 = performance.now();
    (function loop(now){
      const t=(now-t0)%T, prog=t/T, tri=prog<.5?prog*2:(1-(prog-.5)*2);
      targetAlt = tri*MAX_ALT;
      demoRAF = requestAnimationFrame(loop);
    })(performance.now());
    demoFlightBtn.textContent='D·ª´ng m√¥ ph·ªèng'; demoFlightBtn.dataset.running='1';
  }
  function stopDemo(){ if(demoRAF) cancelAnimationFrame(demoRAF); demoRAF=null; demoFlightBtn.textContent='T·ª± ch·∫°y m√¥ ph·ªèng ƒë·ªô cao'; demoFlightBtn.dataset.running='0'; }
  demoFlightBtn.addEventListener('click', ()=> demoFlightBtn.dataset.running==='1'?stopDemo():startDemo());

  // ===== Reset
  resetBtn.addEventListener('click', ()=>{
    stopDemo();
    targetAlt=0; smoothAlt=0; startAltToday=0; // reset m·ªëc ng√†y
    statGain.textContent = '+0 m';
    updateUIByAlt(0);
  });

  // ===== Theme + Modal
  function setTheme(mode){
    document.body.setAttribute('data-theme', mode==='day'?'day':'night');
    const isDay = mode==='day';
    sun.style.display = isDay?'block':'none';
    moon.style.display = isDay?'none':'block';
    toggleTheme.textContent = isDay ? 'Ch·∫ø ƒë·ªô: Ng√†y ‚òÄÔ∏è' : 'Ch·∫ø ƒë·ªô: ƒê√™m üåô';
    toggleTheme.setAttribute('aria-pressed', String(isDay));
  }
  let theme='night';
  toggleTheme.addEventListener('click', ()=>{ theme = theme==='night'?'day':'night'; setTheme(theme); });
  openModalBtn.addEventListener('click', ()=> modal.classList.add('active'));
  closeModalBtn.addEventListener('click', ()=> modal.classList.remove('active'));
  window.addEventListener('click', e=>{ if(e.target===modal) modal.classList.remove('active') });

  // ===== Init
  statGain.textContent = '+0 m';
  updateUIByAlt(0);
  setTheme('night');
</script>
</body>
</html>
